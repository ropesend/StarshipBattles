============================= test session starts =============================
platform win32 -- Python 3.10.11, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\rossr\AppData\Local\Programs\Python\Python310\python.exe
cachedir: .pytest_cache
rootdir: C:\Dev\Starship Battles
configfile: pytest.ini
plugins: anyio-4.12.0, xdist-3.8.0
created: 16/16 workers
16 workers [3 items]

scheduling tests via LoadScheduling

unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drop_validation_success 
unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drop_validation_failure 
unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drag_start 
[gw1] [ 33%] FAILED unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drop_validation_failure 
[gw0] [ 66%] FAILED unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drag_start 
[gw2] [100%] FAILED unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drop_validation_success 

================================== FAILURES ===================================
____________ TestBuilderDragDropReal.test_drop_validation_failure _____________
[gw1] win32 -- Python 3.10.11 C:\Users\rossr\AppData\Local\Programs\Python\Python310\python.exe

self = <unit_tests.test_builder_drag_drop_real.TestBuilderDragDropReal testMethod=test_drop_validation_failure>

    def setUp(self):
        if not pygame.get_init():
            pygame.init()
            pygame.display.set_mode((1,1)) # Mock display for UIManager
    
        # Mock dependencies that BuilderSceneGUI init calls
        self.patchers = []
    
        # Patch UIManager to avoid theme loading real files or needing display
        p_manager = patch('builder_gui.pygame_gui.UIManager')
        self.MockUIManager = p_manager.start()
        self.patchers.append(p_manager)
    
        # Patch SpriteManager
        p_sprite = patch('builder_gui.SpriteManager')
        self.MockSpriteManager = p_sprite.start()
        self.patchers.append(p_sprite)
    
        # Patch PresetManager
        p_preset = patch('builder_gui.PresetManager')
        self.MockPresetManager = p_preset.start()
        self.patchers.append(p_preset)
    
        # Patch ThemeManager
        p_theme = patch('builder_gui.ShipThemeManager')
        self.MockThemeManager = p_theme.start()
        self.patchers.append(p_theme)
    
        # Patch Panels to isolate BuilderSceneGUI
        p_left = patch('builder_gui.BuilderLeftPanel')
        self.MockLeftPanel = p_left.start()
        self.patchers.append(p_left)
    
        p_layer = patch('builder_gui.LayerPanel')
        self.MockLayerPanel = p_layer.start()
        self.patchers.append(p_layer)
    
        p_mod = patch('builder_gui.ModifierEditorPanel')
        self.MockModifierPanel = p_mod.start()
        self.patchers.append(p_mod)
    
        p_weapons = patch('builder_gui.WeaponsReportPanel')
        self.MockWeaponsPanel = p_weapons.start()
        self.patchers.append(p_weapons)
    
        p_view = patch('builder_gui.SchematicView')
        self.MockSchematicView = p_view.start()
        self.patchers.append(p_view)
    
        p_ctrl = patch('builder_gui.InteractionController')
        self.MockInteractionController = p_ctrl.start()
        self.patchers.append(p_ctrl)
    
        # Initialize Builder
        # We need a valid screen size
>       self.builder = BuilderSceneGUI(1280, 720, lambda x: None)

unit_tests\test_builder_drag_drop_real.py:77: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
builder_gui.py:117: in __init__
    self._create_ui()
builder_gui.py:141: in _create_ui
    self.right_panel = BuilderRightPanel(
ui\builder\right_panel.py:67: in __init__
    self.setup_controls()
ui\builder\right_panel.py:111: in setup_controls
    UILabel(pygame.Rect(10, y, 60, 25), "Name:", manager=self.manager, container=self.panel)
C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:122: in __init__
    self.rebuild_from_changed_theme_data()
C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:314: in rebuild_from_changed_theme_data
    self.rebuild()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <UILabel GUISprite(in 0 groups)>

    def rebuild(self):
        """
        Re-render the text to the label's underlying sprite image. This allows us to change what
        the displayed text is or remake it with different theming (if the theming has changed).
        """
    
        text_size = (0, 0)
        if self.font is not None:
            text_size = self.font.get_rect(
                translate(self.text, **self.text_kwargs)
            ).size
        if (
            not self.dynamic_height
            and not self.dynamic_width
            and (
>               (text_size[1] > self.relative_rect.height)
                or (text_size[0] > self.relative_rect.width)
            )
        ):
E       TypeError: '>' not supported between instances of 'MagicMock' and 'int'

C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:166: TypeError
___________________ TestBuilderDragDropReal.test_drag_start ___________________
[gw0] win32 -- Python 3.10.11 C:\Users\rossr\AppData\Local\Programs\Python\Python310\python.exe

self = <unit_tests.test_builder_drag_drop_real.TestBuilderDragDropReal testMethod=test_drag_start>

    def setUp(self):
        if not pygame.get_init():
            pygame.init()
            pygame.display.set_mode((1,1)) # Mock display for UIManager
    
        # Mock dependencies that BuilderSceneGUI init calls
        self.patchers = []
    
        # Patch UIManager to avoid theme loading real files or needing display
        p_manager = patch('builder_gui.pygame_gui.UIManager')
        self.MockUIManager = p_manager.start()
        self.patchers.append(p_manager)
    
        # Patch SpriteManager
        p_sprite = patch('builder_gui.SpriteManager')
        self.MockSpriteManager = p_sprite.start()
        self.patchers.append(p_sprite)
    
        # Patch PresetManager
        p_preset = patch('builder_gui.PresetManager')
        self.MockPresetManager = p_preset.start()
        self.patchers.append(p_preset)
    
        # Patch ThemeManager
        p_theme = patch('builder_gui.ShipThemeManager')
        self.MockThemeManager = p_theme.start()
        self.patchers.append(p_theme)
    
        # Patch Panels to isolate BuilderSceneGUI
        p_left = patch('builder_gui.BuilderLeftPanel')
        self.MockLeftPanel = p_left.start()
        self.patchers.append(p_left)
    
        p_layer = patch('builder_gui.LayerPanel')
        self.MockLayerPanel = p_layer.start()
        self.patchers.append(p_layer)
    
        p_mod = patch('builder_gui.ModifierEditorPanel')
        self.MockModifierPanel = p_mod.start()
        self.patchers.append(p_mod)
    
        p_weapons = patch('builder_gui.WeaponsReportPanel')
        self.MockWeaponsPanel = p_weapons.start()
        self.patchers.append(p_weapons)
    
        p_view = patch('builder_gui.SchematicView')
        self.MockSchematicView = p_view.start()
        self.patchers.append(p_view)
    
        p_ctrl = patch('builder_gui.InteractionController')
        self.MockInteractionController = p_ctrl.start()
        self.patchers.append(p_ctrl)
    
        # Initialize Builder
        # We need a valid screen size
>       self.builder = BuilderSceneGUI(1280, 720, lambda x: None)

unit_tests\test_builder_drag_drop_real.py:77: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
builder_gui.py:117: in __init__
    self._create_ui()
builder_gui.py:141: in _create_ui
    self.right_panel = BuilderRightPanel(
ui\builder\right_panel.py:67: in __init__
    self.setup_controls()
ui\builder\right_panel.py:111: in setup_controls
    UILabel(pygame.Rect(10, y, 60, 25), "Name:", manager=self.manager, container=self.panel)
C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:122: in __init__
    self.rebuild_from_changed_theme_data()
C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:314: in rebuild_from_changed_theme_data
    self.rebuild()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <UILabel GUISprite(in 0 groups)>

    def rebuild(self):
        """
        Re-render the text to the label's underlying sprite image. This allows us to change what
        the displayed text is or remake it with different theming (if the theming has changed).
        """
    
        text_size = (0, 0)
        if self.font is not None:
            text_size = self.font.get_rect(
                translate(self.text, **self.text_kwargs)
            ).size
        if (
            not self.dynamic_height
            and not self.dynamic_width
            and (
>               (text_size[1] > self.relative_rect.height)
                or (text_size[0] > self.relative_rect.width)
            )
        ):
E       TypeError: '>' not supported between instances of 'MagicMock' and 'int'

C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:166: TypeError
____________ TestBuilderDragDropReal.test_drop_validation_success _____________
[gw2] win32 -- Python 3.10.11 C:\Users\rossr\AppData\Local\Programs\Python\Python310\python.exe

self = <unit_tests.test_builder_drag_drop_real.TestBuilderDragDropReal testMethod=test_drop_validation_success>

    def setUp(self):
        if not pygame.get_init():
            pygame.init()
            pygame.display.set_mode((1,1)) # Mock display for UIManager
    
        # Mock dependencies that BuilderSceneGUI init calls
        self.patchers = []
    
        # Patch UIManager to avoid theme loading real files or needing display
        p_manager = patch('builder_gui.pygame_gui.UIManager')
        self.MockUIManager = p_manager.start()
        self.patchers.append(p_manager)
    
        # Patch SpriteManager
        p_sprite = patch('builder_gui.SpriteManager')
        self.MockSpriteManager = p_sprite.start()
        self.patchers.append(p_sprite)
    
        # Patch PresetManager
        p_preset = patch('builder_gui.PresetManager')
        self.MockPresetManager = p_preset.start()
        self.patchers.append(p_preset)
    
        # Patch ThemeManager
        p_theme = patch('builder_gui.ShipThemeManager')
        self.MockThemeManager = p_theme.start()
        self.patchers.append(p_theme)
    
        # Patch Panels to isolate BuilderSceneGUI
        p_left = patch('builder_gui.BuilderLeftPanel')
        self.MockLeftPanel = p_left.start()
        self.patchers.append(p_left)
    
        p_layer = patch('builder_gui.LayerPanel')
        self.MockLayerPanel = p_layer.start()
        self.patchers.append(p_layer)
    
        p_mod = patch('builder_gui.ModifierEditorPanel')
        self.MockModifierPanel = p_mod.start()
        self.patchers.append(p_mod)
    
        p_weapons = patch('builder_gui.WeaponsReportPanel')
        self.MockWeaponsPanel = p_weapons.start()
        self.patchers.append(p_weapons)
    
        p_view = patch('builder_gui.SchematicView')
        self.MockSchematicView = p_view.start()
        self.patchers.append(p_view)
    
        p_ctrl = patch('builder_gui.InteractionController')
        self.MockInteractionController = p_ctrl.start()
        self.patchers.append(p_ctrl)
    
        # Initialize Builder
        # We need a valid screen size
>       self.builder = BuilderSceneGUI(1280, 720, lambda x: None)

unit_tests\test_builder_drag_drop_real.py:77: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
builder_gui.py:117: in __init__
    self._create_ui()
builder_gui.py:141: in _create_ui
    self.right_panel = BuilderRightPanel(
ui\builder\right_panel.py:67: in __init__
    self.setup_controls()
ui\builder\right_panel.py:111: in setup_controls
    UILabel(pygame.Rect(10, y, 60, 25), "Name:", manager=self.manager, container=self.panel)
C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:122: in __init__
    self.rebuild_from_changed_theme_data()
C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:314: in rebuild_from_changed_theme_data
    self.rebuild()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <UILabel GUISprite(in 0 groups)>

    def rebuild(self):
        """
        Re-render the text to the label's underlying sprite image. This allows us to change what
        the displayed text is or remake it with different theming (if the theming has changed).
        """
    
        text_size = (0, 0)
        if self.font is not None:
            text_size = self.font.get_rect(
                translate(self.text, **self.text_kwargs)
            ).size
        if (
            not self.dynamic_height
            and not self.dynamic_width
            and (
>               (text_size[1] > self.relative_rect.height)
                or (text_size[0] > self.relative_rect.width)
            )
        ):
E       TypeError: '>' not supported between instances of 'MagicMock' and 'int'

C:\Users\rossr\AppData\Local\Programs\Python\Python310\lib\site-packages\pygame_gui\elements\ui_label.py:166: TypeError
=========================== short test summary info ===========================
FAILED unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drop_validation_failure - TypeError: '>' not supported between instances of 'MagicMock' and 'int'
FAILED unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drag_start - TypeError: '>' not supported between instances of 'MagicMock' and 'int'
FAILED unit_tests/test_builder_drag_drop_real.py::TestBuilderDragDropReal::test_drop_validation_success - TypeError: '>' not supported between instances of 'MagicMock' and 'int'
============================== 3 failed in 1.82s ==============================
