{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://starship-battles/schemas/vehicleclasses.json",
  "title": "Vehicle Classes Schema v1.0",
  "description": "Schema for validating vehicle class definitions in Combat Lab test data",
  "type": "object",
  "required": ["_metadata", "classes"],
  "properties": {
    "_metadata": {
      "type": "object",
      "required": ["_schema_version", "_data_version"],
      "properties": {
        "_schema_version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+$",
          "description": "Schema version (semver major.minor)"
        },
        "_data_version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+$",
          "description": "Data version (semver major.minor)"
        },
        "_last_modified": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of last modification"
        },
        "_description": {
          "type": "string",
          "description": "Optional description of this data file"
        }
      },
      "additionalProperties": false,
      "description": "Version metadata for schema/data compatibility tracking"
    },
    "_comment": {
      "type": "string",
      "description": "Optional comment describing the vehicle classes"
    },
    "classes": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9_]+$": {
          "$ref": "#/definitions/vehicleClass"
        }
      },
      "additionalProperties": false
    }
  },
  "definitions": {
    "vehicleClass": {
      "type": "object",
      "required": ["name", "type", "max_mass", "default_hull_id", "layers"],
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "description": "Vehicle class name"
        },
        "type": {
          "type": "string",
          "enum": ["Ship", "Fighter", "Station", "Base", "Satellite"],
          "description": "Vehicle type"
        },
        "max_mass": {
          "type": "number",
          "minimum": 1,
          "description": "Maximum mass for this vehicle class"
        },
        "default_hull_id": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9_]+$",
          "description": "Default hull component ID"
        },
        "layers": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/layer"
          },
          "description": "Component layer definitions"
        }
      },
      "additionalProperties": false
    },
    "layer": {
      "type": "object",
      "required": ["type", "radius_pct", "max_mass_pct"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["CORE", "ARMOR", "SURFACE", "EXTERNAL", "WEAPONS", "INNER", "OUTER"],
          "description": "Layer type"
        },
        "radius_pct": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Radius as percentage of total (0-1)"
        },
        "max_mass_pct": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Maximum mass allocation as percentage (0-1)"
        }
      },
      "additionalProperties": false
    }
  }
}
