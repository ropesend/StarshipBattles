{
    "swarm_name": "Phase 5 Final Review Swarm",
    "mission_goal": "Verify Phase 5 (Legacy Purge & Final Polish) completion and generate DETAILED SPECS for Protocol 13 (Archive).",
    "review_phase": "Phase 5: Legacy Purge & Final Polish",
    "next_phase": "REFACTOR COMPLETE - Proceed to Protocol 13 (Archive)",
    "context_root": "./",
    "agents": [
        {
            "role": "Code_Reviewer",
            "focus": "Verify Phase 5 Implementation Quality, Definition of Done, and Refactor Completion",
            "primary_files": [
                "data/vehicleclasses.json",
                "data/components.json",
                "game/simulation/entities/ship.py",
                "game/data/load_vehicle_classes.py",
                "tests/unit/entities/test_ship_core.py",
                "Refactoring/active_refactor.md"
            ],
            "review_checklist": [
                "Verify Task 5.1: vehicleclasses.json contains NO 'hull_mass' fields (grep returns 0 matches)",
                "Verify Task 5.1: vehicleclasses.json contains NO 'requirements' fields (grep returns 0 matches)",
                "Verify Task 5.1: All vehicle classes have 'default_hull_id' referencing valid Hull components",
                "Verify Task 5.2: load_vehicle_classes.py has NO hardcoded fallback vehicle class dictionaries",
                "Verify Task 5.2: Missing vehicleclasses.json raises RuntimeError (fail-fast behavior)",
                "Verify Task 5.3: Ship.__init__ sets base_mass = 0.0 unconditionally (Hull component provides mass)",
                "Verify Task 5.4: update_derelict_status uses ability-based checks (CommandAndControl, CrewCapacity)",
                "Verify Task 5.4: No references to 'requirements' JSON key in derelict logic",
                "Verify Task 5.5: Final Gauntlet passed (536/536 tests, 0 failures)",
                "Verify Task 5.6: Definition of Done - ALL criteria met (hull_mass removed, UI verified, Save/Load verified)"
            ]
        },
        {
            "role": "Plan_Adjuster",
            "focus": "Generate DETAILED SPECS for Protocol 13 - Refactor Archive",
            "primary_files": [
                "Refactoring/active_refactor.md",
                "Refactoring/protocols/13_archive.md",
                "data/vehicleclasses.json",
                "data/components.json",
                "game/simulation/entities/ship.py"
            ],
            "specifications_required": {
                "Archive_Task_1: Generate Refactor Summary Document": {
                    "file": "Refactoring/archive/hull_cohesion_refactor_summary.md",
                    "current_state": "No formal summary document exists for the completed refactor",
                    "target_state": "Comprehensive summary document capturing scope, phases, outcomes, and lessons learned",
                    "detailed_steps": [
                        "1. Create Refactoring/archive/ directory",
                        "2. Write hull_cohesion_refactor_summary.md with sections:",
                        "   - Goal: Unify Ship stats with V2 Ability System",
                        "   - Scope: 5 phases, 25+ tasks, 536 tests verified",
                        "   - Key Outcomes: Hull-as-Component, Ability-Driven Dereliction, Legacy Purge",
                        "   - Files Modified: List of all key files touched",
                        "   - Breaking Changes: None (all legacy fallbacks removed, data migrated)",
                        "   - Metrics: 100% test pass rate, 0 legacy hull_mass references",
                        "3. Include references to active_refactor.md as historical record"
                    ],
                    "dependencies": [],
                    "risk_assessment": "LOW - Documentation only"
                },
                "Archive_Task_2: Update Knowledge Base": {
                    "file": "Knowledge Items",
                    "current_state": "Knowledge items may reference pre-refactor architecture",
                    "target_state": "Knowledge items updated to reflect Hull-as-Component architecture",
                    "detailed_steps": [
                        "1. Update 'Starship Battles: Master Architecture' KI with Hull Component details",
                        "2. Document the 'Hidden Hull Component' pattern in architecture ADR",
                        "3. Update 'Ship Builder UI and UX' KI with Phase 4 layout system changes",
                        "4. Archive refactor-specific details from active_refactor.md into KI artifacts"
                    ],
                    "dependencies": [
                        "Archive_Task_1 must be complete"
                    ],
                    "risk_assessment": "LOW - Knowledge management only"
                },
                "Archive_Task_3: Clean Up Refactoring Directory": {
                    "file": "Refactoring/",
                    "current_state": "Refactoring/ contains working documents, manifests, prompts, reports",
                    "target_state": "Working documents archived or deleted; active_refactor.md preserved as history",
                    "detailed_steps": [
                        "1. Move swarm_prompts/ contents to archive/ (optional, for historical reference)",
                        "2. Move swarm_reports/ contents to archive/ (preserve reviewer outputs)",
                        "3. Keep swarm_manifests/ for future refactors",
                        "4. Keep protocols/ for future refactors",
                        "5. Rename active_refactor.md to archive/hull_cohesion_active_refactor_FINAL.md",
                        "6. Clear active_refactor.md for next refactor (or delete if using separate file per refactor)"
                    ],
                    "dependencies": [
                        "Archive_Task_1 and Archive_Task_2 must be complete"
                    ],
                    "risk_assessment": "LOW - File organization only"
                },
                "Archive_Task_4: Final Status Update": {
                    "file": "Refactoring/active_refactor.md",
                    "current_state": "Status shows [PHASE_5_COMPLETE]",
                    "target_state": "Status shows [REFACTOR_ARCHIVED] with completion timestamp",
                    "detailed_steps": [
                        "1. Update Status line: [REFACTOR_ARCHIVED] - 2026-01-07",
                        "2. Add Archive Date field below Phase 5 Review line",
                        "3. Add link to archive summary document",
                        "4. Mark Protocol 13 (Archive) as complete"
                    ],
                    "dependencies": [
                        "All Archive tasks complete"
                    ],
                    "risk_assessment": "LOW - Status update only"
                }
            }
        }
    ]
}